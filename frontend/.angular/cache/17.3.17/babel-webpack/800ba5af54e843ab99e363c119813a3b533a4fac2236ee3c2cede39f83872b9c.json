{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../core/services/auth.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/material/card\";\nimport * as i5 from \"@angular/material/form-field\";\nimport * as i6 from \"@angular/material/input\";\nimport * as i7 from \"@angular/material/button\";\nimport * as i8 from \"@angular/material/progress-spinner\";\nimport * as i9 from \"@angular/material/icon\";\nfunction SettingsComponent_mat_progress_spinner_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-progress-spinner\", 9);\n  }\n}\nfunction SettingsComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10)(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"check_circle\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.success);\n  }\n}\nfunction SettingsComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"error\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.error);\n  }\n}\nexport let SettingsComponent = /*#__PURE__*/(() => {\n  class SettingsComponent {\n    authService;\n    fullName = '';\n    phoneNumber = '';\n    loading = false;\n    success = '';\n    error = '';\n    constructor(authService) {\n      this.authService = authService;\n    }\n    ngOnInit() {\n      const user = this.authService.getCurrentUserFromToken();\n      this.fullName = user.fullName;\n      this.phoneNumber = user.phoneNumber;\n    }\n    updateProfile() {\n      this.loading = true;\n      this.success = '';\n      this.error = '';\n      this.authService.updateProfile({\n        fullName: this.fullName?.trim(),\n        phoneNumber: this.phoneNumber?.trim()\n      }).subscribe({\n        next: profile => {\n          this.loading = false;\n          this.fullName = profile.fullName ?? profile.FullName ?? this.fullName;\n          this.phoneNumber = profile.phoneNumber ?? profile.PhoneNumber ?? this.phoneNumber;\n          this.success = 'Profile updated successfully.';\n        },\n        error: err => {\n          this.loading = false;\n          this.error = err?.error?.message || err?.error?.Message || 'Failed to update profile.';\n        }\n      });\n    }\n    static ɵfac = function SettingsComponent_Factory(t) {\n      return new (t || SettingsComponent)(i0.ɵɵdirectiveInject(i1.AuthService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: SettingsComponent,\n      selectors: [[\"app-settings\"]],\n      decls: 19,\n      vars: 6,\n      consts: [[1, \"settings-card\"], [1, \"settings-form\", 3, \"ngSubmit\"], [\"appearance\", \"outline\", 1, \"settings-field\"], [\"matInput\", \"\", \"name\", \"fullName\", \"maxlength\", \"100\", 3, \"ngModelChange\", \"ngModel\"], [\"matInput\", \"\", \"name\", \"phoneNumber\", \"maxlength\", \"20\", 3, \"ngModelChange\", \"ngModel\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"type\", \"submit\", 3, \"disabled\"], [\"diameter\", \"28\", 4, \"ngIf\"], [\"class\", \"settings-success\", 4, \"ngIf\"], [\"class\", \"settings-error\", 4, \"ngIf\"], [\"diameter\", \"28\"], [1, \"settings-success\"], [1, \"settings-error\"]],\n      template: function SettingsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"mat-card\", 0)(1, \"h1\");\n          i0.ɵɵtext(2, \"Settings\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"p\");\n          i0.ɵɵtext(4, \"Update your profile details.\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"form\", 1);\n          i0.ɵɵlistener(\"ngSubmit\", function SettingsComponent_Template_form_ngSubmit_5_listener() {\n            return ctx.updateProfile();\n          });\n          i0.ɵɵelementStart(6, \"mat-form-field\", 2)(7, \"mat-label\");\n          i0.ɵɵtext(8, \"Full Name\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"input\", 3);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function SettingsComponent_Template_input_ngModelChange_9_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.fullName, $event) || (ctx.fullName = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(10, \"mat-form-field\", 2)(11, \"mat-label\");\n          i0.ɵɵtext(12, \"Phone Number\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"input\", 4);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function SettingsComponent_Template_input_ngModelChange_13_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.phoneNumber, $event) || (ctx.phoneNumber = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(14, \"button\", 5);\n          i0.ɵɵtext(15, \" Update Profile \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(16, SettingsComponent_mat_progress_spinner_16_Template, 1, 0, \"mat-progress-spinner\", 6)(17, SettingsComponent_div_17_Template, 5, 1, \"div\", 7)(18, SettingsComponent_div_18_Template, 5, 1, \"div\", 8);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(9);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.fullName);\n          i0.ɵɵadvance(4);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.phoneNumber);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"disabled\", ctx.loading);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.success);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.error);\n        }\n      },\n      dependencies: [i2.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.MaxLengthValidator, i3.NgModel, i3.NgForm, i4.MatCard, i5.MatFormField, i5.MatLabel, i6.MatInput, i7.MatButton, i8.MatProgressSpinner, i9.MatIcon],\n      styles: [\".settings-card[_ngcontent-%COMP%]{border-radius:16px;border:1px solid var(--border-soft);padding:24px;max-width:560px}.settings-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 8px;font-family:var(--font-heading);font-size:24px}.settings-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 16px;color:#64748b}.settings-form[_ngcontent-%COMP%]{display:grid;gap:12px}.settings-field[_ngcontent-%COMP%]{width:100%}.settings-success[_ngcontent-%COMP%], .settings-error[_ngcontent-%COMP%]{margin-top:12px;display:flex;align-items:center;gap:6px}.settings-success[_ngcontent-%COMP%]{color:#16a34a}.settings-error[_ngcontent-%COMP%]{color:#dc2626}\"]\n    });\n  }\n  return SettingsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}