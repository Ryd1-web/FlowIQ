{"ast":null,"code":"import { __decorate, __param } from \"tslib\";\nimport { Component, Inject } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nlet ExpenseFormDialogComponent = class ExpenseFormDialogComponent {\n  fb;\n  dialogRef;\n  data;\n  form = this.fb.group({\n    amount: [0, [Validators.required, Validators.min(1)]],\n    category: [13, Validators.required],\n    date: ['', Validators.required],\n    description: ['', [Validators.required, Validators.maxLength(200)]]\n  });\n  constructor(fb, dialogRef, data) {\n    this.fb = fb;\n    this.dialogRef = dialogRef;\n    this.data = data;\n    if (data.record) {\n      this.form.patchValue({\n        amount: data.record.amount,\n        category: this.findCategoryValue(data.record.category),\n        date: this.toDateInput(data.record.date),\n        description: data.record.description ?? ''\n      });\n    }\n  }\n  save() {\n    if (this.form.invalid) {\n      this.form.markAllAsTouched();\n      return;\n    }\n    const value = this.form.getRawValue();\n    this.dialogRef.close({\n      amount: Number(value.amount),\n      date: value.date ?? '',\n      type: 'Expense',\n      category: String(value.category ?? 13),\n      description: value.description ?? ''\n    });\n  }\n  close() {\n    this.dialogRef.close();\n  }\n  findCategoryValue(category) {\n    const numeric = Number(category);\n    if (!Number.isNaN(numeric) && numeric > 0) {\n      return numeric;\n    }\n    const match = this.data.categories.find(x => x.label.toLowerCase() === (category || '').toLowerCase());\n    return match?.value ?? 13;\n  }\n  toDateInput(value) {\n    const d = new Date(value);\n    if (Number.isNaN(d.getTime())) {\n      return '';\n    }\n    return d.toISOString().split('T')[0];\n  }\n};\nExpenseFormDialogComponent = __decorate([Component({\n  selector: 'app-expense-form-dialog',\n  templateUrl: './expense-form-dialog.component.html'\n}), __param(2, Inject(MAT_DIALOG_DATA))], ExpenseFormDialogComponent);\nexport { ExpenseFormDialogComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}