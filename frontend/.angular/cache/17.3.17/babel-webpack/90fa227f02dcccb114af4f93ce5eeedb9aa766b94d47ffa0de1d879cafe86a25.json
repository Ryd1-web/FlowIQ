{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet DashboardComponent = class DashboardComponent {\n  dashboardService;\n  businessService;\n  router;\n  summary;\n  trends;\n  loading = true;\n  error = '';\n  lineChartData = {\n    labels: [],\n    datasets: []\n  };\n  lineChartOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        position: 'bottom'\n      }\n    },\n    scales: {\n      x: {\n        grid: {\n          display: false\n        }\n      },\n      y: {\n        ticks: {\n          callback: value => `NGN ${value}`\n        }\n      }\n    }\n  };\n  lineChartType = 'line';\n  constructor(dashboardService, businessService, router) {\n    this.dashboardService = dashboardService;\n    this.businessService = businessService;\n    this.router = router;\n  }\n  ngOnInit() {\n    this.businessService.getAllForCurrentUser().subscribe({\n      next: businesses => {\n        if (businesses.length === 0) {\n          this.router.navigate(['/setup-business']);\n          return;\n        }\n        const businessId = businesses[0].id;\n        localStorage.setItem('businessId', businessId);\n        this.loadDashboard(businessId);\n      },\n      error: () => {\n        this.error = 'Failed to load businesses.';\n        this.loading = false;\n      }\n    });\n  }\n  loadDashboard(businessId) {\n    this.dashboardService.getSummary(businessId).subscribe({\n      next: data => this.summary = data,\n      error: err => this.error = 'Failed to load summary.'\n    });\n    this.dashboardService.getTrends(businessId, 'monthly').subscribe({\n      next: data => {\n        this.trends = data;\n        this.lineChartData = {\n          labels: data.dates,\n          datasets: [{\n            data: data.in,\n            label: 'Income',\n            borderColor: '#16A34A',\n            backgroundColor: 'rgba(22, 163, 74, 0.14)',\n            tension: 0.35,\n            pointRadius: 2,\n            fill: true\n          }, {\n            data: data.out,\n            label: 'Expense',\n            borderColor: '#DC2626',\n            backgroundColor: 'rgba(220, 38, 38, 0.08)',\n            tension: 0.35,\n            pointRadius: 2,\n            fill: true\n          }]\n        };\n        this.loading = false;\n      },\n      error: err => {\n        this.error = 'Failed to load trends.';\n        this.loading = false;\n      }\n    });\n  }\n  getHealthClass(cashflowHealth) {\n    const health = cashflowHealth?.toLowerCase() || '';\n    if (health.includes('healthy') || health.includes('good')) {\n      return 'health-good';\n    }\n    if (health.includes('warning')) {\n      return 'health-warning';\n    }\n    if (health.includes('critical')) {\n      return 'health-critical';\n    }\n    return 'health-critical';\n  }\n};\nDashboardComponent = __decorate([Component({\n  selector: 'app-dashboard',\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.scss']\n})], DashboardComponent);\nexport { DashboardComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}