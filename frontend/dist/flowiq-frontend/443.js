"use strict";(self.webpackChunkflowiq_frontend=self.webpackChunkflowiq_frontend||[]).push([[443],{443:(R,b,s)=>{s.r(b),s.d(b,{AuthModule:()=>P});var c=s(177),n=s(4438),C=s(8010),u=s(8498),r=s(9417),m=s(5596),p=s(2102),d=s(9631),f=s(8834),h=s(9183),x=s(9213);function _(t,l){if(1&t){const o=n.RV6();n.j41(0,"form",8),n.bIt("ngSubmit",function(){n.eBV(o);const e=n.XpG();return n.Njj(e.requestOtp())}),n.j41(1,"mat-form-field",9)(2,"mat-label"),n.EFF(3,"Phone Number"),n.k0s(),n.j41(4,"input",10),n.mxI("ngModelChange",function(e){n.eBV(o);const a=n.XpG();return n.DH7(a.phone,e)||(a.phone=e),n.Njj(e)}),n.k0s()(),n.j41(5,"button",11),n.EFF(6,"Request OTP"),n.k0s()()}if(2&t){const o=n.XpG();n.R7$(4),n.R50("ngModel",o.phone),n.R7$(),n.Y8G("disabled",o.loading)}}function F(t,l){if(1&t){const o=n.RV6();n.j41(0,"form",8),n.bIt("ngSubmit",function(){n.eBV(o);const e=n.XpG();return n.Njj(e.login())}),n.j41(1,"mat-form-field",9)(2,"mat-label"),n.EFF(3,"OTP"),n.k0s(),n.j41(4,"input",12),n.mxI("ngModelChange",function(e){n.eBV(o);const a=n.XpG();return n.DH7(a.otp,e)||(a.otp=e),n.Njj(e)}),n.k0s()(),n.j41(5,"button",11),n.EFF(6,"Login"),n.k0s()()}if(2&t){const o=n.XpG();n.R7$(4),n.R50("ngModel",o.otp),n.R7$(),n.Y8G("disabled",o.loading)}}function M(t,l){1&t&&n.nrm(0,"mat-progress-spinner",13)}function v(t,l){if(1&t&&(n.j41(0,"div",14)(1,"mat-icon"),n.EFF(2,"error"),n.k0s(),n.EFF(3),n.k0s()),2&t){const o=n.XpG();n.R7$(3),n.SpI(" ",o.error," ")}}function I(t,l){1&t&&n.nrm(0,"mat-progress-spinner",14)}function y(t,l){if(1&t&&(n.j41(0,"div",15)(1,"mat-icon"),n.EFF(2,"error"),n.k0s(),n.EFF(3),n.k0s()),2&t){const o=n.XpG();n.R7$(3),n.SpI(" ",o.error," ")}}function S(t,l){if(1&t&&(n.j41(0,"div",16)(1,"mat-icon"),n.EFF(2,"check_circle"),n.k0s(),n.EFF(3),n.k0s()),2&t){const o=n.XpG();n.R7$(3),n.SpI(" ",o.success," ")}}const T=[{path:"",component:(()=>{class t{auth;router;route;phone="";otp="";loading=!1;error="";step=1;constructor(o,i,e){this.auth=o,this.router=i,this.route=e,this.route.queryParamMap.subscribe(a=>{const g=a.get("phone");g&&(this.phone=g)})}requestOtp(){this.loading=!0,this.error="",this.auth.requestOtp(this.phone).subscribe({next:()=>{this.loading=!1,this.step=2},error:()=>{this.loading=!1,this.error="Failed to request OTP."}})}login(){this.loading=!0,this.error="",this.auth.login(this.phone,this.otp).subscribe({next:()=>{this.loading=!1,this.router.navigate(["/dashboard"])},error:()=>{this.loading=!1,this.error="Login failed. Check OTP."}})}goToSignup(){this.router.navigate(["/login/signup"])}static \u0275fac=function(i){return new(i||t)(n.rXU(C.u),n.rXU(u.Ix),n.rXU(u.nX))};static \u0275cmp=n.VBU({type:t,selectors:[["app-login"]],decls:12,vars:4,consts:[[1,"login-container"],[1,"login-card"],[1,"login-title"],[3,"ngSubmit",4,"ngIf"],["diameter","32",4,"ngIf"],["class","login-error",4,"ngIf"],[1,"auth-switch"],["mat-button","","type","button",3,"click"],[3,"ngSubmit"],["appearance","outline",1,"login-field"],["matInput","","name","phone","required","","maxlength","15",3,"ngModelChange","ngModel"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["matInput","","name","otp","required","","maxlength","8",3,"ngModelChange","ngModel"],["diameter","32"],[1,"login-error"]],template:function(i,e){1&i&&(n.j41(0,"div",0)(1,"mat-card",1)(2,"div",2),n.EFF(3,"Sign in to FlowIQ"),n.k0s(),n.DNE(4,_,7,2,"form",3)(5,F,7,2,"form",3)(6,M,1,0,"mat-progress-spinner",4)(7,v,4,1,"div",5),n.j41(8,"div",6),n.EFF(9," New to FlowIQ? "),n.j41(10,"button",7),n.bIt("click",function(){return e.goToSignup()}),n.EFF(11,"Create account"),n.k0s()()()()),2&i&&(n.R7$(4),n.Y8G("ngIf",1===e.step),n.R7$(),n.Y8G("ngIf",2===e.step),n.R7$(),n.Y8G("ngIf",e.loading),n.R7$(),n.Y8G("ngIf",e.error))},dependencies:[c.bT,r.qT,r.me,r.BC,r.cb,r.YS,r.tU,r.vS,r.cV,m.RN,p.rl,p.nJ,d.fg,f.$z,h.LG,x.An],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:var(--bg-shell)}.login-card[_ngcontent-%COMP%]{width:340px;padding:32px 24px 24px;border-radius:16px;box-shadow:0 2px 16px #16a34a14;background:var(--surface);color:var(--text-primary);display:flex;flex-direction:column;align-items:stretch}.login-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;margin-bottom:18px;text-align:center}.login-field[_ngcontent-%COMP%]{width:100%;margin-bottom:18px}.login-error[_ngcontent-%COMP%]{color:#ef4444;margin-top:12px;display:flex;align-items:center;gap:6px;font-size:1rem}.auth-switch[_ngcontent-%COMP%]{margin-top:12px;color:var(--text-muted);display:flex;align-items:center;justify-content:center;gap:4px;font-size:14px}"]})}return t})()},{path:"signup",component:(()=>{class t{auth;router;phone="";fullName="";loading=!1;error="";success="";constructor(o,i){this.auth=o,this.router=i}signup(){this.loading=!0,this.error="",this.success="",this.auth.signup(this.phone,this.fullName).subscribe({next:o=>{this.loading=!1,this.success=o?.message||"Registration successful. OTP sent.",setTimeout(()=>this.router.navigate(["/login"],{queryParams:{phone:this.phone}}),1200)},error:o=>{this.loading=!1,this.error=o?.error?.message||o?.error?.Message||"Registration failed."}})}goToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(i){return new(i||t)(n.rXU(C.u),n.rXU(u.Ix))};static \u0275cmp=n.VBU({type:t,selectors:[["app-signup"]],decls:24,vars:6,consts:[[1,"signup-container"],[1,"signup-card"],[1,"signup-title"],[1,"signup-subtitle"],[3,"ngSubmit"],["appearance","outline",1,"signup-field"],["matInput","","name","fullName","required","","maxlength","50",3,"ngModelChange","ngModel"],["matInput","","name","phone","required","","maxlength","15",3,"ngModelChange","ngModel"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","32",4,"ngIf"],["class","signup-error",4,"ngIf"],["class","signup-success",4,"ngIf"],[1,"auth-switch"],["mat-button","","type","button",3,"click"],["diameter","32"],[1,"signup-error"],[1,"signup-success"]],template:function(i,e){1&i&&(n.j41(0,"div",0)(1,"mat-card",1)(2,"div",2),n.EFF(3,"Create Your Account"),n.k0s(),n.j41(4,"div",3),n.EFF(5,"First-time user registration"),n.k0s(),n.j41(6,"form",4),n.bIt("ngSubmit",function(){return e.signup()}),n.j41(7,"mat-form-field",5)(8,"mat-label"),n.EFF(9,"Full Name"),n.k0s(),n.j41(10,"input",6),n.mxI("ngModelChange",function(g){return n.DH7(e.fullName,g)||(e.fullName=g),g}),n.k0s()(),n.j41(11,"mat-form-field",5)(12,"mat-label"),n.EFF(13,"Phone Number"),n.k0s(),n.j41(14,"input",7),n.mxI("ngModelChange",function(g){return n.DH7(e.phone,g)||(e.phone=g),g}),n.k0s()(),n.j41(15,"button",8),n.EFF(16,"Sign Up"),n.k0s()(),n.DNE(17,I,1,0,"mat-progress-spinner",9)(18,y,4,1,"div",10)(19,S,4,1,"div",11),n.j41(20,"div",12),n.EFF(21," Already registered? "),n.j41(22,"button",13),n.bIt("click",function(){return e.goToLogin()}),n.EFF(23,"Sign in"),n.k0s()()()()),2&i&&(n.R7$(10),n.R50("ngModel",e.fullName),n.R7$(4),n.R50("ngModel",e.phone),n.R7$(),n.Y8G("disabled",e.loading),n.R7$(2),n.Y8G("ngIf",e.loading),n.R7$(),n.Y8G("ngIf",e.error),n.R7$(),n.Y8G("ngIf",e.success))},dependencies:[c.bT,r.qT,r.me,r.BC,r.cb,r.YS,r.tU,r.vS,r.cV,m.RN,p.rl,p.nJ,d.fg,f.$z,h.LG,x.An],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:var(--bg-shell)}.login-card[_ngcontent-%COMP%]{width:340px;padding:32px 24px 24px;border-radius:16px;box-shadow:0 2px 16px #16a34a14;background:var(--surface);color:var(--text-primary);display:flex;flex-direction:column;align-items:stretch}.login-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;margin-bottom:18px;text-align:center}.login-field[_ngcontent-%COMP%]{width:100%;margin-bottom:18px}.login-error[_ngcontent-%COMP%]{color:#ef4444;margin-top:12px;display:flex;align-items:center;gap:6px;font-size:1rem}.signup-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.signup-card[_ngcontent-%COMP%]{width:350px;padding:2rem 1.5rem}.signup-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:.25rem;text-align:center}.signup-subtitle[_ngcontent-%COMP%]{text-align:center;color:var(--text-muted);margin-bottom:1.25rem;font-size:14px}.signup-field[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.signup-error[_ngcontent-%COMP%]{color:#ef4444;margin-top:1rem;text-align:center}.signup-success[_ngcontent-%COMP%]{color:#16a34a;margin-top:1rem;text-align:center}.auth-switch[_ngcontent-%COMP%]{margin-top:12px;color:var(--text-muted);display:flex;align-items:center;justify-content:center;gap:4px;font-size:14px}"]})}return t})()}];let P=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=n.$C({type:t});static \u0275inj=n.G2t({imports:[c.MD,r.YN,m.Hu,p.RG,d.fS,f.Hl,h.D6,x.m_,u.iI.forChild(T)]})}return t})()}}]);