<div class="login-container">
  <mat-card class="login-card">
    <div class="login-title">Sign in to FlowIQ</div>
    <form *ngIf="step === 1" (ngSubmit)="requestOtp()">
      <mat-form-field appearance="outline" class="login-field">
        <mat-label>Phone Number</mat-label>
        <input matInput [(ngModel)]="phone" name="phone" required maxlength="15">
      </mat-form-field>
      <button mat-raised-button color="primary" type="submit" [disabled]="loading">Request OTP</button>
    </form>
    <form *ngIf="step === 2" (ngSubmit)="login()">
      <mat-form-field appearance="outline" class="login-field">
        <mat-label>OTP</mat-label>
        <input matInput [(ngModel)]="otp" name="otp" required maxlength="8">
      </mat-form-field>
      <button mat-raised-button color="primary" type="submit" [disabled]="loading">Login</button>
    </form>
    <mat-progress-spinner *ngIf="loading" diameter="32"></mat-progress-spinner>
    <div *ngIf="error" class="login-error">
      <mat-icon>error</mat-icon> {{error}}
    </div>
    <div class="auth-switch">
      New to FlowIQ?
      <button mat-button type="button" (click)="goToSignup()">Create account</button>
    </div>
  </mat-card>
</div>
